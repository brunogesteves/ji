{"ast":null,"code":"import _slicedToArray from\"/home/bruno/trabalho/ji/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from\"react\";import slugify from\"react-slugify\";import{useParams}from\"react-router-dom\";import SunEditor from\"suneditor-react\";import\"suneditor/dist/css/suneditor.min.css\";// Import Sun Editor's CSS File\nimport axios from\"axios\";import Modal from\"@material-ui/core/Modal\";import{base_url}from\"../../../config\";import Admin from\"../Admin\";import ImagesWIndow from\"../../../Components/ImagesWIndow/ImagesWIndow\";import NewCategory from\"../../../Components/NewCategory/NewCategory\";import UpdateService from\"../../../Services/UpdateService\";import\"./UpdatePost.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UpdatePost(props){var nameParams=useParams();var idNumber=nameParams.id;// const [id, setId] = useState(\"\");\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),namePost=_useState2[0],setNamePost=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),content=_useState4[0],setContent=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),thumb=_useState6[0],setThumb=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),slide=_useState8[0],setSlide=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),gameplay=_useState10[0],setGameplay=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),middle=_useState12[0],setMiddle=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),gallery=_useState14[0],setGallery=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),publicPost=_useState16[0],setPublicPost=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),file=_useState18[0],setFile=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),category=_useState20[0],setCategory=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),categories=_useState22[0],setCategories=_useState22[1];var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),word=_useState24[0],setWord=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),modalShow=_useState26[0],setModalShow=_useState26[1];var _useState27=useState(\"\"),_useState28=_slicedToArray(_useState27,2),warning=_useState28[0],setWarning=_useState28[1];var editor=useRef(null);useEffect(function(){UpdateService.getInfo(idNumber).then(function(res){setNamePost(res[0].name);setContent(res[0].content);setThumb(res[0].thumb);// setId(res[0].id);\nsetSlide(res[0].slide);setGameplay(res[0].gameplay);setMiddle(res[0].middle);setGallery(res[0].gallery);setPublicPost(res[0].publicpost);setCategory(res[0].category);});// eslint-disable-next-line\n},[]);function dataForm(data){setContent(data);}useEffect(function(){UpdateService.category().then(function(res){setCategories(res);});},[word]);function update(){namePost&&content?UpdateService.update(idNumber,namePost,content,category,thumb,slugify(namePost,{delimiter:\"-\"}),slide?1:0,middle?1:0,gameplay?1:0,gallery?1:0,publicPost).then(function(res){setWarning(res.msg);setInterval(function(){setWarning(\"\");},5000);}).catch(function(error){console.log(\"erro\");}):alert(\"HÃ¡ campos vazios\");}useEffect(function(){var image=file.name;var url=\"\".concat(base_url,\"/upload/\").concat(image);var data=new FormData();data.append(\"file\",file);var options={headers:{\"Content-Type\":\"multipart/form-data\"}};axios.post(url,data,options);},[file]);console.log(\"res-post: \",category);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Admin,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"updateContent\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"updateContent-field\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"update-warning\",children:warning}),/*#__PURE__*/_jsx(\"button\",{onClick:update,children:\"Atualizar\"}),\"Nome:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return setNamePost(e.target.value);},value:namePost}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Publico\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onClick:function onClick(e){return setPublicPost(e.target.checked);},defaultChecked:publicPost?true:null})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Slide\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onClick:function onClick(e){return setSlide(e.target.checked);},defaultChecked:slide?true:null}),\"Meio\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onClick:function onClick(e){return setMiddle(e.target.checked);},defaultChecked:middle?true:null}),\"Gameplay\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onClick:function onClick(e){return setGameplay(e.target.checked);},defaultChecked:gameplay?true:null}),\"Galeria\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onClick:function onClick(e){return setGallery(e.target.checked);},defaultChecked:gallery?true:null})]}),/*#__PURE__*/_jsx(NewCategory,{addCategory:setWord}),/*#__PURE__*/_jsxs(\"select\",{value:category,onClick:function onClick(e){return setCategory(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{children:\"Escolha uma Categoria\"}),categories.map(function(res,i){return/*#__PURE__*/_jsx(\"option\",{children:res.name},i);})]}),/*#__PURE__*/_jsx(\"img\",{src:\"/\".concat(thumb),alt:thumb}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return setModalShow(true);},children:\"Mudar Imagem\"}),/*#__PURE__*/_jsx(Modal,{open:modalShow,onClose:function onClose(){return setModalShow(false);},\"aria-labelledby\":\"simple-modal-title\",\"aria-describedby\":\"simple-modal-description\",children:/*#__PURE__*/_jsx(ImagesWIndow,{show:modalShow,onHide:function onHide(){return setModalShow(false);},setThumb:setThumb,setModalShow:setModalShow})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"updateContent-form\",children:/*#__PURE__*/_jsx(SunEditor,{setContents:content,ref:editor,lang:\"pt_br\",width:\"92%\",height:\"400\",name:\"my-editor\",setOptions:{mode:\"classic\",katex:\"window.katex\",imageWidth:\"(auto)\",imageHeight:\"(auto)\",// imageUploadUrl: `${base_url}/ckimage`,\nimageAccept:\"*\",imageGalleryUrl:\"\".concat(base_url,\"/images\"),imageFileInput:true,videoFileInput:false,tabDisable:false,buttonList:[[\"undo\",\"redo\",\"font\",\"fontSize\",\"formatBlock\",\"paragraphStyle\",\"blockquote\",\"bold\",\"underline\",\"italic\",\"strike\",\"subscript\",\"superscript\",\"fontColor\",\"hiliteColor\",\"textStyle\",\"removeFormat\",\"outdent\",\"indent\",\"align\",\"horizontalRule\",\"list\",\"lineHeight\",\"table\",\"link\",\"image\",\"video\",\"audio\",\"math\",\"imageGallery\",\"fullScreen\",\"showBlocks\",\"codeView\",\"preview\",\"print\",\"save\",\"template\"]]},onChange:dataForm,onImageUploadBefore:function onImageUploadBefore(files){var nameImage=files[0].name;setFile(files[0]);editor.current.editor.insertHTML(\"<img src=\\\"/\".concat(nameImage,\"\\\">\"));return true;}})})]})})});}","map":{"version":3,"sources":["/home/bruno/trabalho/ji/frontend/src/Pages/Admin/UpdatePost/UpdatePost.js"],"names":["React","useState","useEffect","useRef","slugify","useParams","SunEditor","axios","Modal","base_url","Admin","ImagesWIndow","NewCategory","UpdateService","UpdatePost","props","nameParams","idNumber","id","namePost","setNamePost","content","setContent","thumb","setThumb","slide","setSlide","gameplay","setGameplay","middle","setMiddle","gallery","setGallery","publicPost","setPublicPost","file","setFile","category","setCategory","categories","setCategories","word","setWord","modalShow","setModalShow","warning","setWarning","editor","getInfo","then","res","name","publicpost","dataForm","data","update","delimiter","msg","setInterval","catch","error","console","log","alert","image","url","FormData","append","options","headers","post","e","target","value","checked","map","i","mode","katex","imageWidth","imageHeight","imageAccept","imageGalleryUrl","imageFileInput","videoFileInput","tabDisable","buttonList","files","nameImage","current","insertHTML"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport slugify from \"react-slugify\";\nimport { useParams } from \"react-router-dom\";\nimport SunEditor from \"suneditor-react\";\n\nimport \"suneditor/dist/css/suneditor.min.css\"; // Import Sun Editor's CSS File\nimport axios from \"axios\";\nimport Modal from \"@material-ui/core/Modal\";\nimport { base_url } from \"../../../config\";\n\nimport Admin from \"../Admin\";\nimport ImagesWIndow from \"../../../Components/ImagesWIndow/ImagesWIndow\";\nimport NewCategory from \"../../../Components/NewCategory/NewCategory\";\nimport UpdateService from \"../../../Services/UpdateService\";\n\nimport \"./UpdatePost.css\";\n\nexport default function UpdatePost(props) {\n  const nameParams = useParams();\n  let idNumber = nameParams.id;\n\n  // const [id, setId] = useState(\"\");\n  const [namePost, setNamePost] = useState(\"\");\n  const [content, setContent] = useState(\"\");\n  const [thumb, setThumb] = useState(\"\");\n  const [slide, setSlide] = useState(false);\n  const [gameplay, setGameplay] = useState(false);\n  const [middle, setMiddle] = useState(false);\n  const [gallery, setGallery] = useState(false);\n  const [publicPost, setPublicPost] = useState();\n  const [file, setFile] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n  const [categories, setCategories] = useState([]);\n  const [word, setWord] = useState(\"\");\n  const [modalShow, setModalShow] = useState(false);\n  const [warning, setWarning] = useState(\"\");\n  const editor = useRef(null);\n\n  useEffect(() => {\n    UpdateService.getInfo(idNumber).then((res) => {\n      setNamePost(res[0].name);\n      setContent(res[0].content);\n      setThumb(res[0].thumb);\n      // setId(res[0].id);\n      setSlide(res[0].slide);\n      setGameplay(res[0].gameplay);\n      setMiddle(res[0].middle);\n      setGallery(res[0].gallery);\n      setPublicPost(res[0].publicpost);\n      setCategory(res[0].category);\n    });\n    // eslint-disable-next-line\n  }, []);\n\n  function dataForm(data) {\n    setContent(data);\n  }\n\n  useEffect(() => {\n    UpdateService.category().then((res) => {\n      setCategories(res);\n    });\n  }, [word]);\n\n  function update() {\n    namePost && content\n      ? UpdateService.update(\n          idNumber,\n          namePost,\n          content,\n          category,\n          thumb,\n          slugify(namePost, { delimiter: \"-\" }),\n          slide ? 1 : 0,\n          middle ? 1 : 0,\n          gameplay ? 1 : 0,\n          gallery ? 1 : 0,\n          publicPost\n        )\n          .then((res) => {\n            setWarning(res.msg);\n            setInterval(() => {\n              setWarning(\"\");\n            }, 5000);\n          })\n          .catch((error) => {\n            console.log(\"erro\");\n          })\n      : alert(\"HÃ¡ campos vazios\");\n  }\n\n  useEffect(() => {\n    let image = file.name;\n    const url = `${base_url}/upload/${image}`;\n    const data = new FormData();\n    data.append(\"file\", file);\n    const options = {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n      },\n    };\n    axios.post(url, data, options);\n  }, [file]);\n  console.log(\"res-post: \", category);\n  return (\n    <div>\n      <Admin>\n        <div className=\"updateContent\">\n          <div className=\"updateContent-field\">\n            <p className=\"update-warning\">{warning}</p>\n            <button onClick={update}>Atualizar</button>\n            Nome:\n            <input\n              type=\"text\"\n              onChange={(e) => setNamePost(e.target.value)}\n              value={namePost}\n            />\n            <div>\n              Publico\n              <input\n                type=\"checkbox\"\n                onClick={(e) => setPublicPost(e.target.checked)}\n                defaultChecked={publicPost ? true : null}\n              />\n            </div>\n            <div>\n              Slide\n              <input\n                type=\"checkbox\"\n                onClick={(e) => setSlide(e.target.checked)}\n                defaultChecked={slide ? true : null}\n              />\n              Meio\n              <input\n                type=\"checkbox\"\n                onClick={(e) => setMiddle(e.target.checked)}\n                defaultChecked={middle ? true : null}\n              />\n              Gameplay\n              <input\n                type=\"checkbox\"\n                onClick={(e) => setGameplay(e.target.checked)}\n                defaultChecked={gameplay ? true : null}\n              />\n              Galeria\n              <input\n                type=\"checkbox\"\n                onClick={(e) => setGallery(e.target.checked)}\n                defaultChecked={gallery ? true : null}\n              />\n            </div>\n            <NewCategory addCategory={setWord} />\n            <select\n              value={category}\n              onClick={(e) => setCategory(e.target.value)}\n            >\n              <option>Escolha uma Categoria</option>\n              {categories.map((res, i) => (\n                <option key={i}>{res.name}</option>\n              ))}\n            </select>\n            <img src={`/${thumb}`} alt={thumb} />\n            <button type=\"button\" onClick={() => setModalShow(true)}>\n              Mudar Imagem\n            </button>\n            <Modal\n              open={modalShow}\n              onClose={() => setModalShow(false)}\n              aria-labelledby=\"simple-modal-title\"\n              aria-describedby=\"simple-modal-description\"\n            >\n              {\n                <ImagesWIndow\n                  show={modalShow}\n                  onHide={() => setModalShow(false)}\n                  setThumb={setThumb}\n                  setModalShow={setModalShow}\n                />\n              }\n            </Modal>\n          </div>\n          <div className=\"updateContent-form\">\n            <SunEditor\n              setContents={content}\n              ref={editor}\n              lang=\"pt_br\"\n              width=\"92%\"\n              height=\"400\"\n              name=\"my-editor\"\n              setOptions={{\n                mode: \"classic\",\n                katex: \"window.katex\",\n                imageWidth: \"(auto)\",\n                imageHeight: \"(auto)\",\n                // imageUploadUrl: `${base_url}/ckimage`,\n                imageAccept: \"*\",\n                imageGalleryUrl: `${base_url}/images`,\n                imageFileInput: true,\n                videoFileInput: false,\n                tabDisable: false,\n                buttonList: [\n                  [\n                    \"undo\",\n                    \"redo\",\n                    \"font\",\n                    \"fontSize\",\n                    \"formatBlock\",\n                    \"paragraphStyle\",\n                    \"blockquote\",\n                    \"bold\",\n                    \"underline\",\n                    \"italic\",\n                    \"strike\",\n                    \"subscript\",\n                    \"superscript\",\n                    \"fontColor\",\n                    \"hiliteColor\",\n                    \"textStyle\",\n                    \"removeFormat\",\n                    \"outdent\",\n                    \"indent\",\n                    \"align\",\n                    \"horizontalRule\",\n                    \"list\",\n                    \"lineHeight\",\n                    \"table\",\n                    \"link\",\n                    \"image\",\n                    \"video\",\n                    \"audio\",\n                    \"math\",\n                    \"imageGallery\",\n                    \"fullScreen\",\n                    \"showBlocks\",\n                    \"codeView\",\n                    \"preview\",\n                    \"print\",\n                    \"save\",\n                    \"template\",\n                  ],\n                ],\n              }}\n              onChange={dataForm}\n              onImageUploadBefore={(files) => {\n                let nameImage = files[0].name;\n                setFile(files[0]);\n                editor.current.editor.insertHTML(`<img src=\"/${nameImage}\">`);\n                return true;\n              }}\n            />\n          </div>\n        </div>\n      </Admin>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}