{"ast":null,"code":"import _slicedToArray from\"/home/bruno/trabalho/ji/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from\"react\";import SunEditor from\"suneditor-react\";import slugify from\"react-slugify\";import{Redirect}from\"react-router-dom\";import\"suneditor/dist/css/suneditor.min.css\";// Import Sun Editor's CSS File\nimport axios from\"axios\";import Modal from\"@material-ui/core/Modal\";import{base_url}from\"../../../config\";import Admin from\"../Admin\";import ImagesWIndow from\"../../../Components/ImagesWIndow/ImagesWIndow\";import NewCategory from\"../../../Components/NewCategory/NewCategory\";import NewPostService from\"../../../Services/NewPost\";import CategoryService from\"../../../Services/Category\";import\"./NewPost.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var moment=require(\"moment\");export default function NewPost(props){var scheduleTime=moment().format(\"YYYY-MM-DD HH:mm\");var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),namePost=_useState2[0],setNamePost=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),content=_useState4[0],setContent=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),thumb=_useState6[0],setThumb=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),categories=_useState8[0],setCategories=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),word=_useState10[0],setWord=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),category=_useState12[0],setCategory=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),modalShow=_useState14[0],setModalShow=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isAdded=_useState16[0],setIsAdded=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),datetime=_useState18[0],setDatetime=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),id=_useState20[0],setId=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),schedule=_useState22[0],setSchedule=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),slide=_useState24[0],setSlide=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),gameplay=_useState26[0],setGameplay=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),gallery=_useState28[0],setGallery=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),middle=_useState30[0],setMiddle=_useState30[1];var _useState31=useState(1),_useState32=_slicedToArray(_useState31,1),publicpost=_useState32[0];var editor=useRef(null);function dataForm(data){setContent(data);}function createPost(){namePost&&content&&content&&thumb?NewPostService.new(namePost,content,category,thumb,slugify(namePost,{delimiter:\"-\"}),schedule?1:0,datetime?datetime:scheduleTime,slide?1:0,middle?1:0,gameplay?1:0,gallery?1:0,publicpost// create table posts (id int auto_increment primary key, name varchar(255), content text, category varchar(255), thumb varchar(255), slug varchar(255), schedule slide tinyint(1), datetime datetime, slide tinyint(1), middle tinyint(1), gameplay tinyint(1), publicpost tinyint(1));\n).then(function(res){if(res.insertId){setId(res.insertId);setIsAdded(true);}else{alert(res);setIsAdded(false);}}).catch(function(error){console.log(\"Erro ao adicionar o post\");}):alert(\"HÃ¡ campos vazios\");}useEffect(function(){CategoryService.get().then(function(res){setCategories(res);});},[word]);function sendFile(file){var url=\"\".concat(base_url,\"/images/image\");var data=new FormData();data.append(\"file\",file);var options={headers:{\"Content-Type\":\"multipart/form-data\"}};axios.post(url,data,options);}console.log(\"cat: \",category);return/*#__PURE__*/_jsxs(\"div\",{children:[isAdded?/*#__PURE__*/_jsx(Redirect,{to:\"/admin/updatepost/\".concat(id)}):null,/*#__PURE__*/_jsx(Admin,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"newContent\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"newContent-field\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:createPost,children:schedule?\"Agendar\":\"Publicar\"}),\"Nome:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return setNamePost(e.target.value);}}),\"Agendar\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onClick:function onClick(e){return setSchedule(e.target.checked);}}),schedule?/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",className:schedule?\"schedule-show\":\"schedule\",onChange:function onChange(e){return setDatetime(e.target.value);}}):null,\"Slide\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onClick:function onClick(e){return setSlide(e.target.checked);}}),\"Meio\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onClick:function onClick(e){return setMiddle(e.target.checked);}}),\"Gameplay\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onClick:function onClick(e){return setGameplay(e.target.checked);}}),\"Galeria\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onClick:function onClick(e){return setGallery(e.target.checked);}}),/*#__PURE__*/_jsx(NewCategory,{addCategory:setWord}),/*#__PURE__*/_jsxs(\"select\",{onChange:function onChange(e){return setCategory(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{children:\"Escolha uma Categoria\"}),categories.map(function(res,i){return/*#__PURE__*/_jsx(\"option\",{className:\"option-category\",children:res.name},i);})]}),/*#__PURE__*/_jsx(\"img\",{src:\"/\".concat(thumb),alt:thumb}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return setModalShow(true);},children:\"Adicionar Imagem\"}),/*#__PURE__*/_jsx(Modal,{open:modalShow,onClose:function onClose(){return setModalShow(false);},\"aria-labelledby\":\"simple-modal-title\",\"aria-describedby\":\"simple-modal-description\",children:/*#__PURE__*/_jsx(ImagesWIndow,{show:modalShow,onHide:function onHide(){return setModalShow(false);},setThumb:setThumb,setModalShow:setModalShow})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"newContent-form\",children:/*#__PURE__*/_jsx(SunEditor,{ref:editor,lang:\"pt_br\",width:\"100%\",height:\"400\",name:\"my-editor\",setOptions:{mode:\"classic\",katex:\"window.katex\",imageWidth:\"(auto)\",imageHeight:\"(auto)\",// imageUploadUrl: `${base_url}upload`,\nimageAccept:\"*\",imageGalleryUrl:\"\".concat(base_url,\"/images\"),imageFileInput:true,videoFileInput:false,tabDisable:false,buttonList:[[\"undo\",\"redo\",\"font\",\"fontSize\",\"formatBlock\",\"paragraphStyle\",\"blockquote\",\"bold\",\"underline\",\"italic\",\"strike\",\"subscript\",\"superscript\",\"fontColor\",\"hiliteColor\",\"textStyle\",\"removeFormat\",\"outdent\",\"indent\",\"align\",\"horizontalRule\",\"list\",\"lineHeight\",\"table\",\"link\",\"image\",\"video\",\"audio\",\"math\",\"imageGallery\",\"fullScreen\",\"showBlocks\",\"codeView\",\"preview\",\"print\",\"save\",\"template\"]]},onChange:dataForm,onImageUploadBefore:function onImageUploadBefore(files){var nameImage=files[0].name;sendFile(files[0]);editor.current.editor.insertHTML(\"<img src=\\\"/\".concat(nameImage,\"\\\">\"));return true;}})})]})})]});}","map":{"version":3,"sources":["/home/bruno/trabalho/ji/frontend/src/Pages/Admin/NewPost/NewPost.js"],"names":["React","useState","useEffect","useRef","SunEditor","slugify","Redirect","axios","Modal","base_url","Admin","ImagesWIndow","NewCategory","NewPostService","CategoryService","moment","require","NewPost","props","scheduleTime","format","namePost","setNamePost","content","setContent","thumb","setThumb","categories","setCategories","word","setWord","category","setCategory","modalShow","setModalShow","isAdded","setIsAdded","datetime","setDatetime","id","setId","schedule","setSchedule","slide","setSlide","gameplay","setGameplay","gallery","setGallery","middle","setMiddle","publicpost","editor","dataForm","data","createPost","new","delimiter","then","res","insertId","alert","catch","error","console","log","get","sendFile","file","url","FormData","append","options","headers","post","e","target","value","checked","map","i","name","mode","katex","imageWidth","imageHeight","imageAccept","imageGalleryUrl","imageFileInput","videoFileInput","tabDisable","buttonList","files","nameImage","current","insertHTML"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport SunEditor from \"suneditor-react\";\nimport slugify from \"react-slugify\";\nimport { Redirect } from \"react-router-dom\";\n\nimport \"suneditor/dist/css/suneditor.min.css\"; // Import Sun Editor's CSS File\nimport axios from \"axios\";\nimport Modal from \"@material-ui/core/Modal\";\nimport { base_url } from \"../../../config\";\n\nimport Admin from \"../Admin\";\nimport ImagesWIndow from \"../../../Components/ImagesWIndow/ImagesWIndow\";\nimport NewCategory from \"../../../Components/NewCategory/NewCategory\";\nimport NewPostService from \"../../../Services/NewPost\";\nimport CategoryService from \"../../../Services/Category\";\n\nimport \"./NewPost.css\";\nvar moment = require(\"moment\");\n\nexport default function NewPost(props) {\n  var scheduleTime = moment().format(\"YYYY-MM-DD HH:mm\");\n  const [namePost, setNamePost] = useState(\"\");\n  const [content, setContent] = useState(\"\");\n  const [thumb, setThumb] = useState(\"\");\n  const [categories, setCategories] = useState([]);\n  const [word, setWord] = useState(\"\");\n  const [category, setCategory] = useState();\n  const [modalShow, setModalShow] = useState(false);\n  const [isAdded, setIsAdded] = useState(false);\n  const [datetime, setDatetime] = useState(\"\");\n  const [id, setId] = useState(\"\");\n  const [schedule, setSchedule] = useState(false);\n  const [slide, setSlide] = useState(false);\n  const [gameplay, setGameplay] = useState(false);\n  const [gallery, setGallery] = useState(false);\n  const [middle, setMiddle] = useState(false);\n  const [publicpost] = useState(1);\n\n  const editor = useRef(null);\n\n  function dataForm(data) {\n    setContent(data);\n  }\n\n  function createPost() {\n    namePost && content && content && thumb\n      ? NewPostService.new(\n          namePost,\n          content,\n          category,\n          thumb,\n          slugify(namePost, { delimiter: \"-\" }),\n          schedule ? 1 : 0,\n          datetime ? datetime : scheduleTime,\n          slide ? 1 : 0,\n          middle ? 1 : 0,\n          gameplay ? 1 : 0,\n          gallery ? 1 : 0,\n          publicpost\n\n          // create table posts (id int auto_increment primary key, name varchar(255), content text, category varchar(255), thumb varchar(255), slug varchar(255), schedule slide tinyint(1), datetime datetime, slide tinyint(1), middle tinyint(1), gameplay tinyint(1), publicpost tinyint(1));\n        )\n          .then((res) => {\n            if (res.insertId) {\n              setId(res.insertId);\n              setIsAdded(true);\n            } else {\n              alert(res);\n              setIsAdded(false);\n            }\n          })\n          .catch((error) => {\n            console.log(\"Erro ao adicionar o post\");\n          })\n      : alert(\"HÃ¡ campos vazios\");\n  }\n\n  useEffect(() => {\n    CategoryService.get().then((res) => {\n      setCategories(res);\n    });\n  }, [word]);\n\n  function sendFile(file) {\n    const url = `${base_url}/images/image`;\n    const data = new FormData();\n    data.append(\"file\", file);\n    const options = {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n      },\n    };\n    axios.post(url, data, options);\n  }\n\n  console.log(\"cat: \", category);\n\n  return (\n    <div>\n      {isAdded ? <Redirect to={`/admin/updatepost/${id}`} /> : null}\n      <Admin>\n        <div className=\"newContent\">\n          <div className=\"newContent-field\">\n            <button onClick={createPost}>\n              {schedule ? \"Agendar\" : \"Publicar\"}\n            </button>\n            Nome:\n            <input type=\"text\" onChange={(e) => setNamePost(e.target.value)} />\n            Agendar\n            <input\n              type=\"checkbox\"\n              onClick={(e) => setSchedule(e.target.checked)}\n            />\n            {schedule ? (\n              <input\n                type=\"datetime-local\"\n                className={schedule ? \"schedule-show\" : \"schedule\"}\n                onChange={(e) => setDatetime(e.target.value)}\n              />\n            ) : null}\n            Slide\n            <input\n              type=\"checkbox\"\n              onClick={(e) => setSlide(e.target.checked)}\n            />\n            Meio\n            <input\n              type=\"checkbox\"\n              onClick={(e) => setMiddle(e.target.checked)}\n            />\n            Gameplay\n            <input\n              type=\"checkbox\"\n              onClick={(e) => setGameplay(e.target.checked)}\n            />\n            Galeria\n            <input\n              type=\"checkbox\"\n              onClick={(e) => setGallery(e.target.checked)}\n            />\n            <NewCategory addCategory={setWord} />\n            <select onChange={(e) => setCategory(e.target.value)}>\n              <option>Escolha uma Categoria</option>\n              {categories.map((res, i) => (\n                <option className=\"option-category\" key={i}>\n                  {res.name}\n                </option>\n              ))}\n            </select>\n            <img src={`/${thumb}`} alt={thumb} />\n            <div>\n              <button type=\"button\" onClick={() => setModalShow(true)}>\n                Adicionar Imagem\n              </button>\n              <Modal\n                open={modalShow}\n                onClose={() => setModalShow(false)}\n                aria-labelledby=\"simple-modal-title\"\n                aria-describedby=\"simple-modal-description\"\n              >\n                {\n                  <ImagesWIndow\n                    show={modalShow}\n                    onHide={() => setModalShow(false)}\n                    setThumb={setThumb}\n                    setModalShow={setModalShow}\n                  />\n                }\n              </Modal>\n            </div>\n          </div>\n          <div className=\"newContent-form\">\n            <SunEditor\n              ref={editor}\n              lang=\"pt_br\"\n              width=\"100%\"\n              height=\"400\"\n              name=\"my-editor\"\n              setOptions={{\n                mode: \"classic\",\n                katex: \"window.katex\",\n                imageWidth: \"(auto)\",\n                imageHeight: \"(auto)\",\n                // imageUploadUrl: `${base_url}upload`,\n                imageAccept: \"*\",\n                imageGalleryUrl: `${base_url}/images`,\n                imageFileInput: true,\n                videoFileInput: false,\n                tabDisable: false,\n                buttonList: [\n                  [\n                    \"undo\",\n                    \"redo\",\n                    \"font\",\n                    \"fontSize\",\n                    \"formatBlock\",\n                    \"paragraphStyle\",\n                    \"blockquote\",\n                    \"bold\",\n                    \"underline\",\n                    \"italic\",\n                    \"strike\",\n                    \"subscript\",\n                    \"superscript\",\n                    \"fontColor\",\n                    \"hiliteColor\",\n                    \"textStyle\",\n                    \"removeFormat\",\n                    \"outdent\",\n                    \"indent\",\n                    \"align\",\n                    \"horizontalRule\",\n                    \"list\",\n                    \"lineHeight\",\n                    \"table\",\n                    \"link\",\n                    \"image\",\n                    \"video\",\n                    \"audio\",\n                    \"math\",\n                    \"imageGallery\",\n                    \"fullScreen\",\n                    \"showBlocks\",\n                    \"codeView\",\n                    \"preview\",\n                    \"print\",\n                    \"save\",\n                    \"template\",\n                  ],\n                ],\n              }}\n              onChange={dataForm}\n              onImageUploadBefore={(files) => {\n                let nameImage = files[0].name;\n                sendFile(files[0]);\n                editor.current.editor.insertHTML(`<img src=\"/${nameImage}\">`);\n                return true;\n              }}\n            />\n          </div>\n        </div>\n      </Admin>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}