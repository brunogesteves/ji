{"ast":null,"code":"import { find as t, findOne as e, on as o } from \"domassist\";\nimport i from \"attrobj\";\nimport n from \"aug\";\n\nfunction s(t) {\n  return t.parentNode ? JSON.parse(JSON.stringify(t.parentNode.dataset)).module ? t.parentNode : s(t.parentNode) : t;\n}\n\nvar r = {\n  find: t,\n  findOne: e,\n  on: o\n},\n    d = function () {\n  function t(e, o) {\n    return void 0 === o && (o = \"\"), this.log(\"begin setup\"), this.el = e, this.els = {}, this.options = n({}, this.defaults, i(\"module\", this.el)), this.moduleName = o || this.el.dataset.module, this.setUps = {\n      actions: [],\n      named: [],\n      options: []\n    }, this.boundActionRouter = this.actionRouter.bind(this), this.preInit(), this.storeRef(), this.setupActions(), this.setupNamed(), this.verifyRequired(), this.postInit(), this.log(\"initalized\"), t.debug && (this.el.module = this), this;\n  }\n\n  var e,\n      o = t.prototype;\n  return o.preInit = function () {}, o.postInit = function () {}, o.verifyRequired = function () {\n    var t = this;\n    return this.required === {} || (void 0 !== this.required.options && (this.setUps.options = Object.keys(this.options)), Object.keys(this.required).forEach(function (e) {\n      t.required[e].forEach(function (o) {\n        if (t.setUps[e].indexOf(o) < 0) throw new Error(o + \" is required as \" + e + \" for \" + t.moduleName + \", but is missing!\");\n      });\n    })), this;\n  }, o.setupActions = function () {\n    var t = this;\n    this.setupAction(this.el), this.find(\"[data-action]\").forEach(function (e) {\n      s(e) === t.el && t.setupAction(e);\n    });\n  }, o.setupAction = function (e) {\n    if (\"true\" !== e.dataset.domoduleActionProcessed) {\n      var o = t.parseAction(e),\n          i = o.name,\n          n = o.type;\n      i && (\"function\" == typeof this[i] ? (this.log(i + \" bound\"), this.storeSetUp(i, \"actions\"), r.on(e, n, this.boundActionRouter), e.dataset.domoduleActionProcessed = \"true\") : this.log(i + \" was registered, but there is no function set up\"));\n    }\n  }, o.actionRouter = function (e) {\n    var o = e.currentTarget,\n        n = t.parseAction(o).name,\n        s = i(\"action\", o);\n    this[n].call(this, o, e, s);\n  }, o.setupNamed = function () {\n    var t = this;\n    this.find(\"[data-name]\").forEach(function (e) {\n      s(e) === t.el && (e.dataset.domoduleNameProcessed || (t.els[e.dataset.name] = e, t.storeSetUp(e.dataset.name, \"named\"), e.dataset.domoduleNameProcessed = \"true\", e.dataset.domoduleOwner = t.id));\n    });\n  }, o.storeRef = function () {\n    if (void 0 === window.domorefs && (window.domorefs = {}), void 0 !== window.domorefs[this.el.dataset.moduleUid]) return !1;\n    this.id = this.uuid, this.el.dataset.moduleUid = this.id, window.domorefs[this.el.dataset.moduleUid] = this;\n  }, o.find = function (t) {\n    return r.find(t, this.el);\n  }, o.findOne = function (t) {\n    return r.findOne(t, this.el);\n  }, o.findByName = function (t) {\n    return this.els[t];\n  }, o.getOption = function (t) {\n    return this.options[t];\n  }, o.storeSetUp = function (t, e) {\n    this.setUps[e].indexOf(t) < 0 && this.setUps[e].push(t);\n  }, o.destroy = function () {\n    var e = this;\n    r.find(\"[data-action]\", this.el.parentNode).forEach(function (o) {\n      if (\"true\" === o.dataset.domoduleActionProcessed) {\n        var i = t.parseAction(o);\n        o.removeEventListener(i.type, e.boundActionRouter), o.dataset.domoduleActionProcessed = \"false\";\n      }\n    });\n  }, t.parseAction = function (t) {\n    var e = t.dataset,\n        o = e.actionType;\n    return {\n      name: e.action,\n      type: void 0 === o ? \"click\" : o\n    };\n  }, t.getInstance = function (t) {\n    if (t instanceof Node) return window.domorefs[t.dataset.moduleUid];\n    throw new Error(\"getInstance expects a dom node\");\n  }, t.register = function (e, o) {\n    \"function\" == typeof e && (e = (o = e).prototype.constructor.name), window.domodules || (window.domodules = {}), t.log(\"Registering \" + e), window.domodules[e] = o;\n  }, t.discover = function (e) {\n    if (void 0 === e && (e = \"body\"), t.log(\"Discovering modules...\"), window.domodules) {\n      var o;\n      o = e instanceof Node ? [e] : Array.isArray(e) ? e : r.find(e);\n      var i = [];\n      return o.forEach(function (e) {\n        r.find(\"[data-module]\", e).forEach(function (e) {\n          var o = e.dataset.module;\n\n          if (o && \"function\" == typeof window.domodules[o]) {\n            if (\"object\" == typeof window.domorefs && void 0 !== window.domorefs[e.dataset.moduleUid]) return;\n            t.log(o + \" found\"), i.push(new window.domodules[o](e));\n          }\n        });\n      }), i;\n    }\n\n    t.log(\"No modules found\");\n  }, o.log = function (e) {\n    t.log(this.constructor.name + \": \" + e);\n  }, t.log = function (e) {\n    t.debug && console.log(\"[DOMODULE] \" + e);\n  }, (e = [{\n    key: \"required\",\n    get: function get() {\n      return {};\n    }\n  }, {\n    key: \"defaults\",\n    get: function get() {\n      return {};\n    }\n  }, {\n    key: \"uuid\",\n    get: function get() {\n      return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (t) {\n        var e = 16 * Math.random() | 0;\n        return (\"x\" === t ? e : 3 & e | 8).toString(16);\n      });\n    }\n  }]) && function (t, e) {\n    for (var o = 0; o < e.length; o++) {\n      var i = e[o];\n      i.enumerable = i.enumerable || !1, i.configurable = !0, \"value\" in i && (i.writable = !0), Object.defineProperty(t, i.key, i);\n    }\n  }(t.prototype, e), t;\n}();\n\nd.debug = \"object\" == typeof window.localStorage && window.localStorage.getItem(\"DomoduleDebug\"), d.autoDiscover = !0, window.addEventListener(\"DOMContentLoaded\", function () {\n  d.autoDiscover && d.discover();\n});\nexport default d;","map":{"version":3,"sources":["/home/bruno/trabalho/ji/frontend/node_modules/domodule/dist/domodule.module.js"],"names":["find","t","findOne","e","on","o","i","n","s","parentNode","JSON","parse","stringify","dataset","module","r","d","log","el","els","options","defaults","moduleName","setUps","actions","named","boundActionRouter","actionRouter","bind","preInit","storeRef","setupActions","setupNamed","verifyRequired","postInit","debug","prototype","required","Object","keys","forEach","indexOf","Error","setupAction","domoduleActionProcessed","parseAction","name","type","storeSetUp","currentTarget","call","domoduleNameProcessed","domoduleOwner","id","window","domorefs","moduleUid","uuid","findByName","getOption","push","destroy","removeEventListener","actionType","action","getInstance","Node","register","constructor","domodules","discover","Array","isArray","console","key","get","replace","Math","random","toString","length","enumerable","configurable","writable","defineProperty","localStorage","getItem","autoDiscover","addEventListener"],"mappings":"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","sourcesContent":["import{find as t,findOne as e,on as o}from\"domassist\";import i from\"attrobj\";import n from\"aug\";function s(t){return t.parentNode?JSON.parse(JSON.stringify(t.parentNode.dataset)).module?t.parentNode:s(t.parentNode):t}var r={find:t,findOne:e,on:o},d=function(){function t(e,o){return void 0===o&&(o=\"\"),this.log(\"begin setup\"),this.el=e,this.els={},this.options=n({},this.defaults,i(\"module\",this.el)),this.moduleName=o||this.el.dataset.module,this.setUps={actions:[],named:[],options:[]},this.boundActionRouter=this.actionRouter.bind(this),this.preInit(),this.storeRef(),this.setupActions(),this.setupNamed(),this.verifyRequired(),this.postInit(),this.log(\"initalized\"),t.debug&&(this.el.module=this),this}var e,o=t.prototype;return o.preInit=function(){},o.postInit=function(){},o.verifyRequired=function(){var t=this;return this.required==={}||(void 0!==this.required.options&&(this.setUps.options=Object.keys(this.options)),Object.keys(this.required).forEach(function(e){t.required[e].forEach(function(o){if(t.setUps[e].indexOf(o)<0)throw new Error(o+\" is required as \"+e+\" for \"+t.moduleName+\", but is missing!\")})})),this},o.setupActions=function(){var t=this;this.setupAction(this.el),this.find(\"[data-action]\").forEach(function(e){s(e)===t.el&&t.setupAction(e)})},o.setupAction=function(e){if(\"true\"!==e.dataset.domoduleActionProcessed){var o=t.parseAction(e),i=o.name,n=o.type;i&&(\"function\"==typeof this[i]?(this.log(i+\" bound\"),this.storeSetUp(i,\"actions\"),r.on(e,n,this.boundActionRouter),e.dataset.domoduleActionProcessed=\"true\"):this.log(i+\" was registered, but there is no function set up\"))}},o.actionRouter=function(e){var o=e.currentTarget,n=t.parseAction(o).name,s=i(\"action\",o);this[n].call(this,o,e,s)},o.setupNamed=function(){var t=this;this.find(\"[data-name]\").forEach(function(e){s(e)===t.el&&(e.dataset.domoduleNameProcessed||(t.els[e.dataset.name]=e,t.storeSetUp(e.dataset.name,\"named\"),e.dataset.domoduleNameProcessed=\"true\",e.dataset.domoduleOwner=t.id))})},o.storeRef=function(){if(void 0===window.domorefs&&(window.domorefs={}),void 0!==window.domorefs[this.el.dataset.moduleUid])return!1;this.id=this.uuid,this.el.dataset.moduleUid=this.id,window.domorefs[this.el.dataset.moduleUid]=this},o.find=function(t){return r.find(t,this.el)},o.findOne=function(t){return r.findOne(t,this.el)},o.findByName=function(t){return this.els[t]},o.getOption=function(t){return this.options[t]},o.storeSetUp=function(t,e){this.setUps[e].indexOf(t)<0&&this.setUps[e].push(t)},o.destroy=function(){var e=this;r.find(\"[data-action]\",this.el.parentNode).forEach(function(o){if(\"true\"===o.dataset.domoduleActionProcessed){var i=t.parseAction(o);o.removeEventListener(i.type,e.boundActionRouter),o.dataset.domoduleActionProcessed=\"false\"}})},t.parseAction=function(t){var e=t.dataset,o=e.actionType;return{name:e.action,type:void 0===o?\"click\":o}},t.getInstance=function(t){if(t instanceof Node)return window.domorefs[t.dataset.moduleUid];throw new Error(\"getInstance expects a dom node\")},t.register=function(e,o){\"function\"==typeof e&&(e=(o=e).prototype.constructor.name),window.domodules||(window.domodules={}),t.log(\"Registering \"+e),window.domodules[e]=o},t.discover=function(e){if(void 0===e&&(e=\"body\"),t.log(\"Discovering modules...\"),window.domodules){var o;o=e instanceof Node?[e]:Array.isArray(e)?e:r.find(e);var i=[];return o.forEach(function(e){r.find(\"[data-module]\",e).forEach(function(e){var o=e.dataset.module;if(o&&\"function\"==typeof window.domodules[o]){if(\"object\"==typeof window.domorefs&&void 0!==window.domorefs[e.dataset.moduleUid])return;t.log(o+\" found\"),i.push(new window.domodules[o](e))}})}),i}t.log(\"No modules found\")},o.log=function(e){t.log(this.constructor.name+\": \"+e)},t.log=function(e){t.debug&&console.log(\"[DOMODULE] \"+e)},(e=[{key:\"required\",get:function(){return{}}},{key:\"defaults\",get:function(){return{}}},{key:\"uuid\",get:function(){return\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return(\"x\"===t?e:3&e|8).toString(16)})}}])&&function(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}();d.debug=\"object\"==typeof window.localStorage&&window.localStorage.getItem(\"DomoduleDebug\"),d.autoDiscover=!0,window.addEventListener(\"DOMContentLoaded\",function(){d.autoDiscover&&d.discover()});export default d;\n//# sourceMappingURL=domodule.module.js.map\n"]},"metadata":{},"sourceType":"module"}